"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5784],{65784:(z,O,a)=>{a.r(O),a.d(O,{InvoicepagePageModule:()=>Y});var d=a(69808),f=a(34182),c=a(54153),s=a(41115),l=a(70655),b=a(4159),Z=a.n(b),T=a(53583),p=a(15439),A=a(24850),t=a(6435),U=a(5920),x=a(72316),y=a(40520);function I(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2),t.qZA(),t.TgZ(3,"td",18)(4,"h3")(5,"a"),t._uU(6),t.qZA()(),t._uU(7),t.qZA(),t.TgZ(8,"td",22),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"td",23),t._uU(12),t.qZA(),t.TgZ(13,"td",24),t._uU(14),t.ALo(15,"currency"),t.qZA()()),2&n){const e=r.$implicit,o=r.index;t.xp6(2),t.Oqu(o),t.xp6(4),t.hij(" ",e.Category," "),t.xp6(1),t.hij(" ",e.ProductName," "),t.xp6(2),t.Oqu(t.xi3(10,6,e.UnitPrice,"\u20b1")),t.xp6(3),t.Oqu(e.Quantity),t.xp6(2),t.Oqu(t.xi3(15,9,e.UnitPrice*e.Quantity,"\u20b1"))}}const q=[{path:"",component:(()=>{class n{constructor(e,o,g,u,h,M,m,v,P,B){this.applicationRef=e,this.zone=o,this.actRoute=g,this.afstore=u,this.afauth=h,this.router=M,this.currencyPipe=m,this.alertCtrl=v,this.http=P,this.loadingController=B,this.orders=[],this.currentStock=[],this.afauth.authState.subscribe(C=>(0,l.__awaiter)(this,void 0,void 0,function*(){if(C.uid&&C&&(this.name=this.actRoute.snapshot.paramMap.get("name"),this.id=this.actRoute.snapshot.paramMap.get("id"),this.type=this.actRoute.snapshot.paramMap.get("type"),this.orderDetails="orders"==this.name?this.afstore.collection("Orders").doc(this.id):this.afstore.collection("History").doc(this.id),this.sub=this.orderDetails.snapshotChanges().pipe((0,A.U)(i=>Object.assign({id:i.payload.id},i.payload.data()))).subscribe(i=>(0,l.__awaiter)(this,void 0,void 0,function*(){this.orders=i.OrderDetails,this.data=i,this.total=i.TotalAmount,this.subtotal="WALK-IN"!=i.Billingemail.toUpperCase()?i.TotalAmount-30:i.TotalAmount,this.firstname=i.BillingFirstname,this.lastname=i.BillingLastname,this.address1=i.BillingAddress1,this.address2=i.BillingAddress2,this.status=i.Status,this.phonenumber="WALK-IN"==i.BillingPhonenumber.toString().toUpperCase()?"Walk-In":"0"+i.BillingPhonenumber,this.email=i.Billingemail,this.deliveryfee="WALK-IN"!=i.Billingemail.toUpperCase()?30:0,this.paymentMethod=i.PaymentMethod,this.dateOrdered=p(i.Datetime).format("MM-DD-YYYY hh:mm A"),this.invoiceDate=p(new Date).format("MM-DD-YYYY hh:mm A"),this.dateOrdered2=p(i.Datetime).format("MM-DD-YYYY")})),"POS"==this.type)){var _=yield this.loadingController.create({message:"Downloading invoice...",spinner:"bubbles"});yield _.present(),setTimeout(()=>(0,l.__awaiter)(this,void 0,void 0,function*(){yield this.convertToPDF(),yield _.dismiss()}),3800)}}))}ngOnInit(){return(0,l.__awaiter)(this,void 0,void 0,function*(){})}convertToPDF(){Z()(document.getElementById("invoice")).then(e=>{const o=e.toDataURL("image/png");let g=new T.ZP("l","mm","a6");g.internal.pageSize.getWidth(),g.addImage(o,"PNG",10,10,129.9,100.9),g.addPage(),e.toDataURL("image/png"),g.internal.pageSize.getWidth(),g.addImage(o,"PNG",10,10,129.9,100.9),g.addPage(),e.toDataURL("image/png"),g.internal.pageSize.getWidth(),g.addImage(o,"PNG",10,10,129.9,100.9),g.save(`${this.firstname+" "+this.lastname} - ${this.dateOrdered2}`)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.z2F),t.Y36(t.R0b),t.Y36(s.gz),t.Y36(U.ST),t.Y36(x.zQ),t.Y36(s.F0),t.Y36(d.H9),t.Y36(c.Br),t.Y36(y.eN),t.Y36(c.HT))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-invoicepage"]],decls:79,vars:21,consts:[["slot","start"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","print-outline"],["id","invoice"],[1,"toolbar","hidden-print"],[1,"text-right"],[1,"invoice","overflow-auto"],[2,"min-width","600px"],[1,"row","contacts"],[1,"col","invoice-to"],[1,"text-gray-light"],[1,"to"],[1,"address"],[1,"email"],[1,"col","invoice-details"],[1,"date"],["border","0","cellspacing","0","cellpadding","0"],[1,"text-left"],[4,"ngFor","ngForOf"],["colspan","2"],[1,"no"],[1,"unit"],[1,"qty"],[1,"total"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Sales Invoice"),t.qZA(),t.TgZ(4,"ion-buttons",0),t._UZ(5,"ion-back-button"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"ion-fab",1)(8,"ion-fab-button",2),t.NdJ("click",function(){return o.convertToPDF()}),t._UZ(9,"ion-icon",3),t.qZA()(),t.TgZ(10,"div",4)(11,"div",5),t._UZ(12,"div",6)(13,"hr"),t.qZA(),t.TgZ(14,"div",7)(15,"div",8)(16,"main")(17,"div",9)(18,"div",10)(19,"div",11),t._uU(20,"INVOICE TO:"),t.qZA(),t.TgZ(21,"h2",12),t._uU(22),t.qZA(),t.TgZ(23,"div",13),t._uU(24),t.qZA(),t.TgZ(25,"div",13),t._uU(26),t.qZA(),t.TgZ(27,"div",14)(28,"a"),t._uU(29),t.qZA()()(),t.TgZ(30,"div",15)(31,"div",16),t._uU(32),t.qZA(),t.TgZ(33,"div",16),t._uU(34),t.qZA()()(),t.TgZ(35,"table",17)(36,"thead")(37,"tr")(38,"th"),t._uU(39,"#"),t.qZA(),t.TgZ(40,"th",18),t._uU(41,"PRODUCT NAME"),t.qZA(),t.TgZ(42,"th",6),t._uU(43,"UNIT PRICE"),t.qZA(),t.TgZ(44,"th",6),t._uU(45,"QTY"),t.qZA(),t.TgZ(46,"th",6),t._uU(47,"TOTAL"),t.qZA()()(),t.TgZ(48,"tbody"),t.YNc(49,I,16,12,"tr",19),t.qZA(),t.TgZ(50,"tfoot")(51,"tr"),t._UZ(52,"td",20),t.TgZ(53,"td",20),t._uU(54,"PAYMENT METHOD"),t.qZA(),t.TgZ(55,"td"),t._uU(56),t.qZA()(),t.TgZ(57,"tr"),t._UZ(58,"td",20),t.TgZ(59,"td",20),t._uU(60,"SUBTOTAL"),t.qZA(),t.TgZ(61,"td"),t._uU(62),t.ALo(63,"currency"),t.qZA()(),t.TgZ(64,"tr"),t._UZ(65,"td",20),t.TgZ(66,"td",20),t._uU(67,"DELIVERY FEE"),t.qZA(),t.TgZ(68,"td"),t._uU(69),t.ALo(70,"currency"),t.qZA()(),t.TgZ(71,"tr"),t._UZ(72,"td",20),t.TgZ(73,"td",20),t._uU(74,"TOTAL AMOUNT"),t.qZA(),t.TgZ(75,"td"),t._uU(76),t.ALo(77,"currency"),t.qZA()()()()()(),t._UZ(78,"div"),t.qZA()()()),2&e&&(t.xp6(22),t.AsE("",o.firstname," ",o.lastname,""),t.xp6(2),t.Oqu(o.address1),t.xp6(2),t.Oqu(o.address2),t.xp6(3),t.Oqu(o.email),t.xp6(3),t.hij("Date of Invoice: ",o.invoiceDate,""),t.xp6(2),t.hij("Date Ordered: ",o.dateOrdered,""),t.xp6(15),t.Q6J("ngForOf",o.orders),t.xp6(7),t.Oqu(o.paymentMethod),t.xp6(6),t.Oqu(t.xi3(63,12,o.subtotal,"\u20b1")),t.xp6(7),t.Oqu(t.xi3(70,15,o.deliveryfee,"\u20b1")),t.xp6(7),t.Oqu(t.xi3(77,18,o.total,"\u20b1")))},dependencies:[d.sg,c.oU,c.Sm,c.W2,c.IJ,c.W4,c.Gu,c.gu,c.wd,c.sr,c.cs,d.H9],styles:["ion-back-button[_ngcontent-%COMP%]{display:block}ion-fab-button[_ngcontent-%COMP%]{--background: #ffb4a2}ion-toolbar[_ngcontent-%COMP%]{--background: #e5989b}ion-content[_ngcontent-%COMP%]{--background: #6d6875}#invoice[_ngcontent-%COMP%]{padding:30px}.invoice[_ngcontent-%COMP%]{position:relative;background-color:#fff;min-height:680px;padding:15px}.invoice[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{padding:10px 0;margin-bottom:20px;border-bottom:1px solid #3989c6}.invoice[_ngcontent-%COMP%]   .company-details[_ngcontent-%COMP%]{text-align:right}.invoice[_ngcontent-%COMP%]   .company-details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.invoice[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]{margin-bottom:20px}.invoice[_ngcontent-%COMP%]   .invoice-to[_ngcontent-%COMP%]{text-align:left}.invoice[_ngcontent-%COMP%]   .invoice-to[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.invoice[_ngcontent-%COMP%]   .invoice-details[_ngcontent-%COMP%]{text-align:right}.invoice[_ngcontent-%COMP%]   .invoice-details[_ngcontent-%COMP%]   .invoice-id[_ngcontent-%COMP%]{margin-top:0;color:#3989c6}.invoice[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{padding-bottom:50px}.invoice[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .thanks[_ngcontent-%COMP%]{margin-top:-100px;font-size:2em;margin-bottom:50px}.invoice[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .notices[_ngcontent-%COMP%]{padding-left:6px;border-left:6px solid #3989c6}.invoice[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .notices[_ngcontent-%COMP%]   .notice[_ngcontent-%COMP%]{font-size:1.2em}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-spacing:0;margin-bottom:20px}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px;background:#eee;border-bottom:1px solid #fff}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;font-weight:400;font-size:16px}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:400;color:#3989c6;font-size:1.2em}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .qty[_ngcontent-%COMP%], .invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%], .invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{text-align:right;font-size:1.2em}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:#fff;font-size:1.6em;background:#3989c6}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{background:#ddd}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background:#3989c6;color:#fff}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border:none}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:0 0;border-bottom:none;white-space:nowrap;text-align:right;padding:10px 20px;font-size:1.2em;border-top:1px solid #aaa}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{border-top:none}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{color:#3989c6;font-size:1.4em;border-top:1px solid #3989c6}.invoice[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border:none}.invoice[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{width:100%;text-align:center;color:#777;border-top:1px solid #aaa;padding:8px 0}@media print{.invoice[_ngcontent-%COMP%]{font-size:11px!important;overflow:hidden!important}.invoice[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{position:absolute;bottom:10px;page-break-after:always}.invoice[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{page-break-before:always}}"]}),n})()}];let D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.Bz.forChild(q),s.Bz]}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,f.u5,c.Pc,D]}),n})()}}]);