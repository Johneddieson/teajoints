"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8309],{88309:(Z,h,s)=>{s.r(h),s.d(h,{Admintab2PageModule:()=>P});var c=s(69808),m=s(34182),a=s(54153),u=s(41115),g=s(15439),p=s(24850),t=s(6435),f=s(5920),C=s(72316);function b(r,d){if(1&r){const e=t.EpF();t.TgZ(0,"ion-content")(1,"ion-item")(2,"ion-label"),t._uU(3,"Customer Fullname :"),t.qZA(),t.TgZ(4,"ion-input",9),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.customerName=i)})("ionChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.handleChange(i))}),t.qZA()(),t.TgZ(5,"ion-item")(6,"ion-label"),t._uU(7,"Customer Email :"),t.qZA(),t.TgZ(8,"ion-input",9),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.customerEmail=i)})("ionChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.handleChangeEmail(i))}),t.qZA()(),t.TgZ(9,"ion-item",10)(10,"ion-label"),t._uU(11,"Start Date :"),t.qZA(),t.TgZ(12,"ion-input",11),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.dateStart=i)})("ionChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.handleChangeStartDate(i))}),t.qZA()(),t.TgZ(13,"ion-item",10)(14,"ion-label"),t._uU(15,"End Date :"),t.qZA(),t.TgZ(16,"ion-input",11),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.dateEnd=i)})("ionChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.handleChangeStartDate(i))}),t.qZA()(),t.TgZ(17,"ion-item",10)(18,"ion-label"),t._uU(19,"Status :"),t.qZA(),t.TgZ(20,"ion-select",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.status=i)})("ionChange",function(i){t.CHM(e);const l=t.oxw();return t.KtG(l.handleChangeStatus(i))}),t.TgZ(21,"ion-select-option",13),t._uU(22,"--- SHOW ALL ---"),t.qZA(),t.TgZ(23,"ion-select-option",14),t._uU(24,"Delivered"),t.qZA(),t.TgZ(25,"ion-select-option",15),t._uU(26,"Rejected"),t.qZA()()(),t.TgZ(27,"ion-item",16)(28,"ion-buttons",2)(29,"ion-button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.close())}),t._uU(30,"Close"),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.customerName),t.xp6(4),t.Q6J("ngModel",e.customerEmail),t.xp6(4),t.Q6J("ngModel",e.dateStart),t.xp6(4),t.Q6J("ngModel",e.dateEnd),t.xp6(4),t.Q6J("ngModel",e.status)}}function A(r,d){if(1&r&&(t.TgZ(0,"ion-card",18)(1,"ion-card-header")(2,"ion-card-subtitle"),t._uU(3),t.qZA(),t.TgZ(4,"ion-card-title"),t._uU(5),t.qZA()(),t.TgZ(6,"ion-card-content"),t._uU(7),t._UZ(8,"br"),t._uU(9),t.qZA()()),2&r){const e=d.$implicit;t.MGl("routerLink","/orderdetails/",e.id,"/history"),t.xp6(3),t.Oqu(e.Billingemail),t.xp6(2),t.AsE("",e.BillingFirstname," ",e.BillingLastname,""),t.xp6(2),t.hij(" ",e.Datetime," "),t.xp6(2),t.hij(" ",e.Status," ")}}const M=[{path:"",component:(()=>{class r{constructor(e,n,i,l,o){this.afstore=e,this.afauth=n,this.router=i,this.currencyPipe=l,this.alertCtrl=o,this.allPendingOrders=[],this.customerName="",this.customerEmail="",this.dateStart="",this.dateEnd="",this.inp_customerEmail="",this.inp_startDate="",this.inp_endDate="",this.inp_status="",this.historyQuery()}ngOnInit(){}ngOnChanges(e){}handleChangeStatus(e){const n=e.target.value.toLowerCase();this.inp_status=null==n?"":n,this.historyQuery()}handleChange(e){const n=e.target.value.toLowerCase();this.onchangeQueryEvent=null==n?"":n,this.historyQuery()}handleChangeEmail(e){const n=e.target.value.toLowerCase();this.inp_customerEmail=null==n?"":n,this.historyQuery()}handleChangeStartDate(e){const n=e.target.value.toLowerCase();this.inp_startDate=null==n?"":n,this.historyQuery()}handleChangeEndDate(e){const n=e.target.value.toLowerCase();this.inp_endDate=null==n?"":n,this.historyQuery()}close(){this.modal.dismiss(),this.customerName=this.customerName,this.customerEmail=this.customerEmail,this.dateStart=this.dateStart,this.dateEnd=this.dateEnd}historyQuery(){this.afauth.authState.subscribe(e=>{e&&e.uid&&(this.productReference=this.afstore.collection("History"),this.sub=this.productReference.snapshotChanges().pipe((0,p.U)(n=>n.map(i=>Object.assign({historyid:i.payload.doc.id},i.payload.doc.data())))).subscribe(n=>{if(n=(n=n.map((o,_)=>Object.assign({BillingAddress1:o.BillingAddress1,BillingAddress2:o.BillingAddress2,BillingFirstname:o.BillingFirstname,BillingIndexId:o.BillingIndexId,BillingLastname:o.BillingLastname,BillingPhonenumber:o.BillingPhonenumber,Billingemail:o.Billingemail,Datetime:o.Datetime,Status:o.Status,TotalAmount:o.TotalAmount,id:o.historyid,DatetimeToSort:g(o.Datetime).toDate(),OrderDetails:o.OrderDetails,BillingFullName:`${o.BillingFirstname} ${o.BillingLastname}`}))).sort((o,_)=>Number(_.DatetimeToSort)-Number(o.DatetimeToSort)),""!=this.customerName&&(n=n.filter(o=>o.BillingFullName.toLowerCase().includes(this.onchangeQueryEvent.toLowerCase()))),""!=this.customerEmail&&(n=n.filter(o=>o.Billingemail.toLowerCase().includes(this.inp_customerEmail.toLowerCase()))),console.log("the stats",this.status),null!=this.status&&(n=n.filter(o=>o.Status.includes(this.status))),""!=this.dateStart&&""!=this.dateEnd){var i=this.dateStart+" 00:00",l=this.dateEnd+" 23:59";n=n.filter(o=>g(g(o.Datetime).format("MM-DD-YYYY hh:mm A")).toDate()>=g(i).toDate()&&g(g(o.Datetime).format("MM-DD-YYYY hh:mm A")).toDate()<=g(l).toDate())}this.allPendingOrders=n}))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.ST),t.Y36(C.zQ),t.Y36(u.F0),t.Y36(c.H9),t.Y36(a.Br))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-admintab2"]],viewQuery:function(e,n){if(1&e&&t.Gf(a.ki,5),2&e){let i;t.iGM(i=t.CRH())&&(n.modal=i.first)}},features:[t.TTD],decls:14,vars:2,consts:[["slot","start"],["menu","main-menu"],["slot","end"],["name","search-outline","id","open-modal2",2,"cursor","pointer","zoom","2.0"],["trigger","open-modal2","mode","md",3,"backdropDismiss"],[1,"content"],["fixed",""],["size","12"],["tappable","","color","dark",3,"routerLink",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange","ionChange"],["counter","true"],["type","date",3,"ngModel","ngModelChange","ionChange"],["placeholder","Select Status",3,"ngModel","ngModelChange","ionChange"],["value",""],["value","Delivered"],["value","Rejected"],["lines","none"],["color","danger",3,"click"],["tappable","","color","dark",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-toolbar")(1,"ion-buttons",0),t._UZ(2,"ion-menu-button",1),t.TgZ(3,"ion-title"),t._uU(4,"History Orders"),t.qZA()(),t.TgZ(5,"ion-buttons",2),t._UZ(6,"ion-icon",3),t.qZA()(),t.TgZ(7,"ion-modal",4),t.YNc(8,b,31,5,"ng-template"),t.qZA(),t.TgZ(9,"ion-content",5)(10,"ion-grid",6)(11,"ion-row")(12,"ion-col",7),t.YNc(13,A,10,6,"ion-card",8),t.qZA()()()()),2&e&&(t.xp6(7),t.Q6J("backdropDismiss",!1),t.xp6(6),t.Q6J("ngForOf",n.allPendingOrders))},dependencies:[c.sg,m.JJ,m.On,a.YG,a.Sm,a.PM,a.FN,a.Zi,a.tO,a.Dq,a.wI,a.W2,a.jY,a.gu,a.pK,a.Ie,a.Q$,a.fG,a.Nd,a.t9,a.n0,a.wd,a.sr,a.ki,a.QI,a.j9,a.YI,u.rH],styles:[".toolbar[_ngcontent-%COMP%]{height:84px;--background: #69A03A;color:#fff;font-size:20px;line-height:84px}.addproduct[_ngcontent-%COMP%]{cursor:pointer}.addproduct[_ngcontent-%COMP%]:active{color:red}.labeldate[_ngcontent-%COMP%]{font-family:Verdana,Geneva,Tahoma,sans-serif;font-weight:900}.labelname[_ngcontent-%COMP%]{font-family:Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;font-weight:900;font-size:18px;color:#2f0101}.totalamount[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-weight:bolder}ion-accordion.accordion-expanded[_ngcontent-%COMP%]   ion-item[slot=header][_ngcontent-%COMP%]{--background: #69A03A;--color: #fff}.content[_ngcontent-%COMP%]{--background: #6d6875}ion-toolbar[_ngcontent-%COMP%]{--background: #e5989b}ion-card-subtitle[_ngcontent-%COMP%]{font-weight:bolder;color:#000}ion-card-title[_ngcontent-%COMP%]{font-weight:bolder;color:#000}ion-card-content[_ngcontent-%COMP%]{font-weight:bolder;color:#fff}"]}),r})()}];let T=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[u.Bz.forChild(M),u.Bz]}),r})(),P=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[c.ez,m.u5,a.Pc,T]}),r})()}}]);