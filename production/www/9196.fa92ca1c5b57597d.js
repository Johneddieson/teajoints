"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9196],{79196:(Y,h,i)=>{i.r(h),i.d(h,{Tab2PageModule:()=>S});var e=i(54153),c=i(69808),T=i(34182),b=i(581),d=i(41115),P=i(24850),t=i(6435),Z=i(5920),M=i(72316),v=i(33388);function y(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"ion-item",7),t.NdJ("click",function(){t.CHM(n);const m=t.oxw().$implicit,f=t.oxw();return t.KtG(f.update(m))}),t.TgZ(1,"p"),t._uU(2,"Mark as read"),t.qZA()()}}function C(o,s){if(1&o&&(t.TgZ(0,"ion-card",4)(1,"ion-card-header")(2,"ion-card-subtitle"),t._uU(3),t.qZA(),t.TgZ(4,"ion-item")(5,"ion-label",5),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-card-content")(8,"ion-label"),t._uU(9),t.qZA()(),t.TgZ(10,"ion-row"),t.YNc(11,y,3,0,"ion-item",6),t.qZA()()),2&o){const n=s.$implicit;t.xp6(3),t.hij(" Remarks: ",n.remarks," "),t.xp6(3),t.Oqu(n.Message),t.xp6(3),t.hij("Due ",n.Datetime,""),t.xp6(2),t.Q6J("ngIf",!n.read)}}const O=[{path:"",component:(()=>{class o{constructor(n,u,m,f,A,F,N){this.router=n,this.afstore=u,this.afauth=m,this.loadingCtrl=f,this.locationStrategy=A,this.auth=F,this.alertCtrl=N,this.notificationsList=[],this.notifCounts=0,this.afauth.authState.subscribe(l=>{l&&l.uid&&(this.myid=l.uid,this.notificationsReference=this.afstore.collection(`users/${l.uid}/notifications`),this.sub=this.notificationsReference.snapshotChanges().pipe((0,P.U)(r=>r.map(g=>Object.assign({id:g.payload.doc.id},g.payload.doc.data())))).subscribe(r=>{r=(r=r.map((a,p)=>Object.assign({id:a.id,Datetime:a.Datetime,DatetimeToSort:a.DatetimeToSort,read:a.read,remarks:a.remarks,Message:a.Message}))).sort((a,p)=>Number(p.DatetimeToSort)-Number(a.DatetimeToSort)),this.notificationsList=r,console.log("wewewew",this.notificationsList);var g=r.filter(a=>1!=a.read);this.notifCounts=g.length,console.log("count",this.notifCounts)}))})}ngOnInit(){}update(n){console.log("edited",this.myid),this.afstore.doc(`users/${this.myid}/notifications/${n.id}`).update({read:!0})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.F0),t.Y36(Z.ST),t.Y36(M.zQ),t.Y36(e.HT),t.Y36(c.S$),t.Y36(v.u),t.Y36(e.Br))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tab2"]],decls:7,vars:2,consts:[["slot","start"],["menu","main-menu"],[3,"fullscreen"],["class","ion-margin",4,"ngFor","ngForOf"],[1,"ion-margin"],["text-wrap",""],["button","",3,"click",4,"ngIf"],["button","",3,"click"]],template:function(n,u){1&n&&(t.TgZ(0,"ion-toolbar")(1,"ion-buttons",0),t._UZ(2,"ion-menu-button",1),t.TgZ(3,"ion-title"),t._uU(4,"Notifications"),t.qZA()()(),t.TgZ(5,"ion-content",2),t.YNc(6,C,12,4,"ion-card",3),t.qZA()),2&n&&(t.xp6(5),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngForOf",u.notificationsList))},dependencies:[e.Sm,e.PM,e.FN,e.Zi,e.tO,e.W2,e.Ie,e.Q$,e.fG,e.Nd,e.wd,e.sr,c.sg,c.O5],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #e5989b}ion-toolbar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300}ion-content[_ngcontent-%COMP%]{--background: #6d6875}"]}),o})()}];let x=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(O),d.Bz]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[e.Pc,c.ez,T.u5,b.e,x]}),o})()}}]);