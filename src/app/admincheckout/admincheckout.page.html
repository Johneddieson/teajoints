<ion-header>
  <ion-toolbar>
    <ion-buttons  slot="start">
   <!-- <ion-back-button></ion-back-button> -->
    </ion-buttons>
    <ion-title>Check Out</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-modal  mode="sm" [backdropDismiss]="false"
  class="example-modal">
    <ng-template>
      <ion-content color="light">
        <ion-item *ngFor="let mat of dataMaterials">
          <ion-label text-wrap>{{mat.itemName}} :</ion-label>
          <ion-input value="{{mat.Quantity}}"
          (ionChange)="editMaterialQuantity($event, mat)"
          placeholder="Enter Quantity" type="number"></ion-input>
      </ion-item>
        <ion-item lines="none">
         <ion-buttons slot="end">
          <!-- <ion-button color="danger" [disabled]="disabledSaveChanges" 
          (click)="close()">Close
          </ion-button> -->
          <ion-button color="success" [disabled]="disabledSaveChanges" 
          (click)="saveQuantityChanged()">Save Changes
        </ion-button>
         </ion-buttons>
        </ion-item> 
      </ion-content>
    </ng-template>
  </ion-modal>
  <div class="small-container cart-page">
    <table>
      <tr>
        <th>Product</th>
        <th>Quantity</th>
        <th>Subtotal</th>
      </tr>
      <tr *ngFor="let data of getCartDetails">
        <td>
          <div class="cart-info">
           <img src="{{data.ImageUrl}}" style="cursor: pointer;" (click)="getMaterialOfProducts(data)">
            <div>
              <p>{{data.ProductName}} <br> <small>Price: {{data.UnitPrice | currency: '₱'}}</small>
              <br>
              <a (click)="singleDelete(data)">Remove</a>
              <br>
              <ion-buttons>
                <ion-button (click)="dec(data.id, data.Quantity)">
                  <ion-icon slot="icon-only" name="remove-outline"></ion-icon>
                </ion-button>
                <ion-button (click)="inc(data.id, data.Quantity)">
                  <ion-icon slot="icon-only" name="add-outline"></ion-icon>
                </ion-button>
              </ion-buttons>  
            </p>
            </div>
          </div>
        </td>
        <td><input type="text" value="{{data.Quantity}}" disabled></td>
        <td>{{(data.Quantity * data.UnitPrice) | currency: '₱'}}</td>
      </tr>    
    </table>
    <div class="total-price" *ngIf="total > 0">
      <table>
        <tr>
          <td>Subtotal</td>
          <td>{{(total) | currency: '₱'}}</td>
        </tr>

        <tr>
          <td>Delivery Fee</td>
          <td>{{0 | currency: '₱'}}</td>
        </tr>

        <tr>
          <td>Total Amount</td>
          <td>{{(total) | currency: '₱'}}</td>
        </tr>
          <tr>
            <td>Payment Method</td>
            <td>
                <ion-select #paymentMethod>
                  <ion-select-option value="COD">Cash</ion-select-option>
                <ion-select-option value="Online Payment">Online Payment</ion-select-option>
                </ion-select>
            </td>
          </tr>
        
        <tr>
          <td></td>
          <td>
            <ion-button *ngIf="total > 0" (click)="OrderNow(paymentMethod)">Confirm Order</ion-button>

          </td>
        </tr>
      </table>
    </div>
  </div>
</ion-content>