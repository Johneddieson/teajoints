"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9196],{9196:(A,h,i)=>{i.r(h),i.d(h,{Tab2PageModule:()=>x});var o=i(4153),c=i(9808),T=i(4182),b=i(581),g=i(1115),P=i(4850),t=i(6435),M=i(5920),v=i(2316),y=i(3388);function Z(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(){t.CHM(n);const f=t.oxw().$implicit,m=t.oxw();return t.KtG(m.update(f))}),t.TgZ(1,"p"),t._uU(2,"Mark as read"),t.qZA()()}}function C(e,s){if(1&e&&(t.TgZ(0,"ion-card",2)(1,"ion-card-header")(2,"ion-card-subtitle"),t._uU(3),t.qZA(),t.TgZ(4,"ion-item")(5,"ion-label",3),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-card-content")(8,"ion-label"),t._uU(9),t.qZA()(),t.TgZ(10,"ion-row"),t.YNc(11,Z,3,0,"ion-item",4),t.qZA()()),2&e){const n=s.$implicit;t.xp6(3),t.hij(" Remarks: ",n.remarks," "),t.xp6(3),t.Oqu(n.Message),t.xp6(3),t.hij("Due ",n.Datetime,""),t.xp6(2),t.Q6J("ngIf",!n.read)}}const F=[{path:"",component:(()=>{class e{constructor(n,u,f,m,S,D,Y){this.router=n,this.afstore=u,this.afauth=f,this.loadingCtrl=m,this.locationStrategy=S,this.auth=D,this.alertCtrl=Y,this.notificationsList=[],this.notifCounts=0,this.afauth.authState.subscribe(l=>{l&&l.uid&&(this.myid=l.uid,this.notificationsReference=this.afstore.collection(`users/${l.uid}/notifications`),this.sub=this.notificationsReference.snapshotChanges().pipe((0,P.U)(r=>r.map(d=>Object.assign({id:d.payload.doc.id},d.payload.doc.data())))).subscribe(r=>{r=(r=r.map((a,p)=>Object.assign({id:a.id,Datetime:a.Datetime,DatetimeToSort:a.DatetimeToSort,read:a.read,remarks:a.remarks,Message:a.Message}))).sort((a,p)=>Number(p.DatetimeToSort)-Number(a.DatetimeToSort)),this.notificationsList=r,console.log("wewewew",this.notificationsList);var d=r.filter(a=>1!=a.read);this.notifCounts=d.length,console.log("count",this.notifCounts)}))})}ngOnInit(){}update(n){console.log("edited",this.myid),this.afstore.doc(`users/${this.myid}/notifications/${n.id}`).update({read:!0})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.F0),t.Y36(M.ST),t.Y36(v.zQ),t.Y36(o.HT),t.Y36(c.S$),t.Y36(y.u),t.Y36(o.Br))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tab2"]],decls:2,vars:2,consts:[[3,"fullscreen"],["class","ion-margin",4,"ngFor","ngForOf"],[1,"ion-margin"],["text-wrap",""],["button","",3,"click",4,"ngIf"],["button","",3,"click"]],template:function(n,u){1&n&&(t.TgZ(0,"ion-content",0),t.YNc(1,C,12,4,"ion-card",1),t.qZA()),2&n&&(t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngForOf",u.notificationsList))},dependencies:[o.PM,o.FN,o.Zi,o.tO,o.W2,o.Ie,o.Q$,o.Nd,c.sg,c.O5],styles:["ion-content[_ngcontent-%COMP%]{--background: #F0F4FD}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300}"]}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(F),g.Bz]}),e})(),x=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[o.Pc,c.ez,T.u5,b.e,O]}),e})()}}]);