"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5633],{5633:(N,m,c)=>{c.r(m),c.d(m,{EditproductPageModule:()=>U});var h=c(9808),s=c(4182),a=c(4153),p=c(1115),f=c(5439),t=c(6435),_=c(520),P=c(5920);function b(e,i){if(1&e&&t._UZ(0,"img",19),2&e){const o=t.oxw();t.s9C("src",o.photoLink,t.LSH)}}function v(e,i){1&e&&(t.TgZ(0,"ion-text",20),t._uU(1," Product Name shouldn't be empty "),t.qZA())}function w(e,i){if(1&e&&(t.TgZ(0,"ion-text",22),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.registerForm.controls.firstname.errors.invalidMsg," ")}}function x(e,i){if(1&e&&(t.TgZ(0,"div",21),t.YNc(1,w,2,1,"ion-text",13),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.registerForm.controls.firstname.errors.invalidMsg)}}function F(e,i){1&e&&(t.TgZ(0,"ion-text",22),t._uU(1," Product Name must be minimum 5 characters long "),t.qZA())}function I(e,i){1&e&&(t.TgZ(0,"ion-text",22),t._uU(1," Stock of product shouldn't be empty "),t.qZA())}function T(e,i){if(1&e&&(t.TgZ(0,"ion-text",22),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.registerForm.controls.cellphonenumber.errors.invalidMsg," ")}}function M(e,i){if(1&e&&(t.TgZ(0,"div",21),t.YNc(1,T,2,1,"ion-text",13),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.registerForm.controls.cellphonenumber.errors.invalidMsg)}}function E(e,i){1&e&&(t.TgZ(0,"ion-text",22),t._uU(1," Price of product shouldn't be empty "),t.qZA())}function Z(e,i){if(1&e&&(t.TgZ(0,"ion-text",22),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.registerForm.controls.password.errors.invalidMsg," ")}}function C(e,i){if(1&e&&(t.TgZ(0,"div",21),t.YNc(1,Z,2,1,"ion-text",13),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.registerForm.controls.password.errors.invalidMsg)}}const y=[{path:"",component:(()=>{class e{constructor(o,r,l,d,n,g){this.actRoute=o,this.http=r,this.formBuilder=l,this.loadingCtrl=d,this.alertCtrl=n,this.afstore=g,this.withPhoto=!1,this.isdisabled=!1,this.id=o.snapshot.paramMap.get("id"),this.productReference=this.afstore.doc(`Products/${this.id}`),this.sub=this.productReference.valueChanges().subscribe(u=>{this.productname=u.ProductName,this.stock=u.Stock.toString(),this.price=u.UnitPrice,this.photoLink=u.ImageUrl,this.withPhoto=!0,this.currentstock=u.Stock.toString()})}ngOnInit(){this.registerForm=new s.cw({firstname:new s.NI("",[s.kI.required,this.customPatternValid({pattern:/^([A-Z][a-z]*((\s[A-Za-z])?[a-z]*)*)$/,msg:"Always Starts With Capital Letter"}),this.customPatternValid({pattern:/^([^0-9]*)$/,msg:"Numbers is not allowed"}),s.kI.minLength(5)]),cellphonenumber:new s.NI("",[s.kI.required,this.customPatternValid({pattern:/^[+-]?(?:\d*[1-9]\d*(?:\.\d+)?|0+\.\d*[1-9]\d*)$/,msg:"This format is not allowed"}),this.customPatternValid({pattern:/^([^.?!-]*)$/,msg:"Negative is not allowed"}),this.customPatternValid({pattern:/^([^.?!_]*)$/,msg:"Under Score is not allowed"}),this.customPatternValid({pattern:/^([^.?!=]*)$/,msg:"Equal is not allowed"}),this.customPatternValid({pattern:/^([^.?!+]*)$/,msg:"Plus is not allowed"}),this.customPatternValid({pattern:/^([^.?!.]*)$/,msg:"Period is not allowed"})]),password:new s.NI("",[s.kI.required,this.customPatternValid({pattern:/^[+-]?(?:\d*[1-9]\d*(?:\.\d+)?|0+\.\d*[1-9]\d*)$/,msg:"This format is not allowed"}),this.customPatternValid({pattern:/^([^-]*)$/,msg:"Negative is not allowed"}),this.customPatternValid({pattern:/^([^?!_]*)$/,msg:"Under Score is not allowed"}),this.customPatternValid({pattern:/^([^?!=]*)$/,msg:"Equal is not allowed"}),this.customPatternValid({pattern:/^([^?!+]*)$/,msg:"Plus is not allowed"})])})}customPatternValid(o){return console.log("wew",o),r=>r.value&&!r.value.match(o.pattern)?{invalidMsg:o.msg}:null}reset(){console.log("wew",this.myInputVariable.value),this.myInputVariable.value=""}fileChanged(o){const r=o.target.files;console.log("the files",r);const l=new FormData;l.append("file",r[0]),l.append("UPLOADCARE_PUB_KEY","2f6b781d802ebb97d2e3"),this.http.post("https://upload.uploadcare.com/base/",l).subscribe(d=>{var n={events:d};for(var g in n){console.log("wew",n[g].file);for(const u of r)this.photoLink=`https://ucarecdn.com/${n[g].file}/${u.name}`}this.withPhoto=!0})}submit(){this.loadingCtrl.create({message:"Updating Product"}).then(d=>{d.present(),setTimeout(()=>{d.dismiss(),this.alertCtrl.create({header:"Officially Updated",message:"You updated the product successfully",buttons:[{text:"Ok",role:"cancel"}]}).then(n=>{n.present()}).catch(n=>{})},3e3)}).catch(d=>{});var o=f(new Date).format("DD-MM-YYYY hh:mm A");if(parseInt(this.registerForm.value.cellphonenumber)==parseInt(this.currentstock))this.productReference.update({Stock:parseInt(this.registerForm.value.cellphonenumber),UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink});else if(parseInt(this.registerForm.value.cellphonenumber)>parseInt(this.currentstock)){var r=parseInt(this.registerForm.value.cellphonenumber)-parseInt(this.currentstock);this.productReference.update({Stock:parseInt(this.registerForm.value.cellphonenumber),UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink}),this.afstore.collection("Inventory").add({Quantity:1*r,Datetime:o,read:!1,Destination:"Admin",ProductName:this.registerForm.value.firstname,UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink,DatetimeToSort:new Date})}else{var l=parseInt(this.currentstock)-parseInt(this.registerForm.value.cellphonenumber);this.productReference.update({Stock:parseInt(this.registerForm.value.cellphonenumber),UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink}),this.afstore.collection("Inventory").add({Quantity:-1*l,Datetime:o,read:!1,Destination:"Admin",ProductName:this.registerForm.value.firstname,UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink,DatetimeToSort:new Date})}}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.gz),t.Y36(_.eN),t.Y36(s.qu),t.Y36(a.HT),t.Y36(a.Br),t.Y36(P.ST))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-editproduct"]],viewQuery:function(o,r){if(1&o&&t.Gf(a.pK,5),2&o){let l;t.iGM(l=t.CRH())&&(r.myInputVariable=l.first)}},decls:35,vars:14,consts:[[1,"toolbar"],["slot","start"],[1,"ion-padding","ion-text-center"],["class","camera",3,"src",4,"ngIf"],["type","file",3,"change"],[1,"form"],["hidden","","type","file","accept","image/*",1,"uploadfile",3,"change"],["inputFile",""],["novalidate","",3,"formGroup","ngSubmit"],["lines","none"],["placeholder","Enter product name","formControlName","firstname",3,"disabled","ngModel","ngModelChange"],["type","text","color","danger",4,"ngIf"],["class","error",4,"ngIf"],["color","danger",4,"ngIf"],["type","tel","placeholder","Enter Stock","formControlName","cellphonenumber",3,"ngModel","ngModelChange"],["type","tel","placeholder","Enter Price","formControlName","password",3,"ngModel","ngModelChange"],["type","submit","hidden",""],["btn",""],["color","dark","expand","block",3,"disabled","click"],[1,"camera",3,"src"],["type","text","color","danger"],[1,"error"],["color","danger"]],template:function(o,r){if(1&o){const l=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Edit Product"),t.qZA()()(),t.TgZ(6,"ion-content",2),t.YNc(7,b,1,1,"img",3),t.TgZ(8,"ion-input",4),t.NdJ("change",function(n){return r.fileChanged(n)}),t.qZA(),t._UZ(9,"br")(10,"br")(11,"br")(12,"br")(13,"br"),t.TgZ(14,"div",5)(15,"ion-input",6,7),t.NdJ("change",function(n){return r.fileChanged(n)}),t.qZA(),t.TgZ(17,"form",8),t.NdJ("ngSubmit",function(){return r.submit()}),t.TgZ(18,"ion-item",9)(19,"ion-input",10),t.NdJ("ngModelChange",function(n){return r.productname=n}),t.qZA()(),t.YNc(20,v,2,0,"ion-text",11),t.YNc(21,x,2,1,"div",12),t.YNc(22,F,2,0,"ion-text",13),t.TgZ(23,"ion-item",9)(24,"ion-input",14),t.NdJ("ngModelChange",function(n){return r.stock=n}),t.qZA()(),t.YNc(25,I,2,0,"ion-text",13),t.YNc(26,M,2,1,"div",12),t.TgZ(27,"ion-item",9)(28,"ion-input",15),t.NdJ("ngModelChange",function(n){return r.price=n}),t.qZA()(),t.YNc(29,E,2,0,"ion-text",13),t.YNc(30,C,2,1,"div",12),t._UZ(31,"button",16,17),t.TgZ(33,"ion-button",18),t.NdJ("click",function(){t.CHM(l);const n=t.MAs(32);return t.KtG(n.click())}),t._uU(34,"Update Product"),t.qZA()()()()}2&o&&(t.xp6(7),t.Q6J("ngIf",""!=r.photoLink),t.xp6(10),t.Q6J("formGroup",r.registerForm),t.xp6(2),t.Q6J("disabled",!r.isdisabled)("ngModel",r.productname),t.xp6(1),t.Q6J("ngIf",r.registerForm.get("firstname").hasError("required")&&r.registerForm.get("firstname").touched),t.xp6(1),t.Q6J("ngIf",!r.registerForm.controls.firstname.valid&&(r.registerForm.controls.firstname.dirty||r.registerForm.controls.firstname.touched)),t.xp6(1),t.Q6J("ngIf",r.registerForm.get("firstname").hasError("minlength")&&r.registerForm.get("firstname").touched),t.xp6(2),t.Q6J("ngModel",r.stock),t.xp6(1),t.Q6J("ngIf",r.registerForm.get("cellphonenumber").hasError("required")&&r.registerForm.get("cellphonenumber").touched),t.xp6(1),t.Q6J("ngIf",!r.registerForm.controls.cellphonenumber.valid&&(r.registerForm.controls.cellphonenumber.dirty||r.registerForm.controls.cellphonenumber.touched)),t.xp6(2),t.Q6J("ngModel",r.price),t.xp6(1),t.Q6J("ngIf",r.registerForm.get("password").hasError("required")&&r.registerForm.get("password").touched),t.xp6(1),t.Q6J("ngIf",!r.registerForm.controls.password.valid&&(r.registerForm.controls.password.dirty||r.registerForm.controls.password.touched)),t.xp6(3),t.Q6J("disabled",r.registerForm.invalid))},dependencies:[h.O5,s._Y,s.JJ,s.JL,a.oU,a.YG,a.Sm,a.W2,a.Gu,a.pK,a.Ie,a.yW,a.wd,a.sr,a.j9,a.cs,s.sg,s.u],styles:["ion-back-button[_ngcontent-%COMP%]{display:block}.toolbar[_ngcontent-%COMP%]{height:84px;--background: #69A03A;color:#fff;font-size:20px;line-height:84px}.camera[_ngcontent-%COMP%]{width:200px;height:128px;margin:0 auto}.logo[_ngcontent-%COMP%]{margin-top:6%}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.form[_ngcontent-%COMP%]{margin-top:-20px}.form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-radius:5px;border-color:gray;border-width:2px;border-style:solid;margin-bottom:10px}ion-button[_ngcontent-%COMP%]{text-transform:none}"]}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(y),p.Bz]}),e})(),U=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.ez,s.u5,a.Pc,s.UX,k]}),e})()}}]);