"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4597],{64597:(U,h,i)=>{i.r(h),i.d(h,{ViewproductsPageModule:()=>S});var u=i(69808),m=i(34182),s=i(54153),d=i(41115),P=i(70655),t=i(6435),C=i(24850),M=i(15439),y=i(40520),O=i(5920),x=i(72316);const b=["productbtn"];function v(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",4),t._UZ(3,"img",5),t.TgZ(4,"div")(5,"p"),t._uU(6),t._UZ(7,"br"),t.TgZ(8,"small"),t._uU(9),t.ALo(10,"currency"),t.qZA(),t._UZ(11,"br"),t.TgZ(12,"a",6),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.DeleteProduct(c))}),t._uU(13,"Remove"),t.qZA()()()()(),t.TgZ(14,"td"),t._UZ(15,"input",7),t.qZA(),t.TgZ(16,"td")(17,"span",8)(18,"button",9),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.EditProduct(c))}),t._uU(19," Edit"),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(3),t.s9C("src",e.ImageUrl,t.LSH),t.xp6(3),t.hij("",e.ProductName," "),t.xp6(3),t.hij("Price: ",t.xi3(10,4,e.UnitPrice,"\u20b1"),""),t.xp6(6),t.s9C("value",e.Stock)}}const w=[{path:"",component:(()=>{class n{constructor(e,o,r,c,l,g,p){this.http=e,this.loadingCtrl=o,this.alertCtrl=r,this.afstore=c,this.afauth=l,this.router=g,this.actRoute=p,this.products=[],this.dropdown=!1,this.category="",this.afauth.authState.subscribe(f=>{f&&f.uid&&this.getAllProducts()})}getAllProducts(){this.productReference=this.category?this.afstore.collection("Products",e=>e.where("Category","==",this.category)):this.afstore.collection("Products"),this.sub=this.productReference.snapshotChanges().pipe((0,C.U)(e=>e.map(o=>Object.assign({id:o.payload.doc.id},o.payload.doc.data())))).subscribe(e=>{e=e.sort(function(o,r){return o.ProductName<r.ProductName?-1:o.ProductName>r.ProductName?1:0}),this.products=e})}loadProducts(){return(0,P.__awaiter)(this,void 0,void 0,function*(){var e=yield this.loadingCtrl.create({message:"Loading...",spinner:"bubbles"});yield e.present(),setTimeout(()=>{e.dismiss()},300)})}SearchCategory(){return(0,P.__awaiter)(this,void 0,void 0,function*(){var e=this.alertCtrl.create({header:"Choose Category",inputs:[{type:"radio",label:"--SHOW ALL--",value:""},{type:"radio",label:"Frappe",value:"Frappe"},{type:"radio",label:"Milktea",value:"Milktea"},{type:"radio",label:"Noodles",value:"Noodles"},{type:"radio",label:"Pares",value:"Pares"},{type:"radio",label:"Platters",value:"Platters"},{type:"radio",label:"Shakes",value:"Shakes"},{type:"radio",label:"Silog Meals",value:"Silog Meals"},{type:"radio",label:"Sizzling Meal W Rice",value:"Sizzling Meal W/ Rice"},{type:"radio",label:"Snacks",value:"Snacks"},{type:"radio",label:"Rice Meal",value:"Rice Meal"}],buttons:[{text:"Search",handler:o=>{this.category=o,this.loadProducts(),setTimeout(()=>{this.getAllProducts()},500)}},{text:"Close",role:"cancel"}]});(yield e).present()})}ngOnInit(){}DeleteProduct(e){this.alertCtrl.create({message:"Are you sure you want to delete this product?",buttons:[{text:"Yes",handler:()=>{var o=M(new Date).format("DD-MM-YYYY hh:mm A");this.afstore.collection("Inventory").add({Quantity:-1*parseInt(e.Stock),Datetime:o,read:!1,Destination:"Admin",ProductName:e.ProductName,UnitPrice:e.UnitPrice,ImageUrl:e.ImageUrl}),this.afstore.doc(`Products/${e.id}`).delete()}},{text:"No",role:"cancel"}]}).then(o=>{o.present()})}EditProduct(e){this.router.navigateByUrl(`/editproduct/${e.id}`)}hideDropdown(e){const o=e.clientX,r=e.clientY,c=this.productbtn.nativeElement.getBoundingClientRect();(o<c.left+2||o>c.right-2||r<c.top+2)&&(this.dropdown=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.eN),t.Y36(s.HT),t.Y36(s.Br),t.Y36(O.ST),t.Y36(x.zQ),t.Y36(d.F0),t.Y36(d.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-viewproducts"]],viewQuery:function(e,o){if(1&e&&t.Gf(b,5,t.SBq),2&e){let r;t.iGM(r=t.CRH())&&(o.productbtn=r.first)}},inputs:{title:"title"},decls:15,vars:1,consts:[["slot","start"],["menu","main-menu"],[1,"small-container","cart-page"],[4,"ngFor","ngForOf"],[1,"cart-info"],[3,"src"],[3,"click"],["type","text","disabled","",2,"text-align","right",3,"value"],[2,"float","right"],["id","btn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-toolbar")(1,"ion-buttons",0),t._UZ(2,"ion-menu-button",1),t.TgZ(3,"ion-title"),t._uU(4,"View Products"),t.qZA()()(),t.TgZ(5,"ion-content")(6,"div",2)(7,"table")(8,"tr")(9,"th"),t._uU(10,"Product Name"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Qty On Hand"),t.qZA(),t._UZ(13,"th"),t.qZA(),t.YNc(14,v,20,7,"tr",3),t.qZA()()()),2&e&&(t.xp6(14),t.Q6J("ngForOf",o.products))},dependencies:[u.sg,s.Sm,s.W2,s.fG,s.wd,s.sr,u.H9],styles:["ion-back-button[_ngcontent-%COMP%]{display:block}ion-content[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#ff523b}ion-content[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}ion-content[_ngcontent-%COMP%]   .cart-page[_ngcontent-%COMP%]{margin:16px auto;border:12vmax}ion-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}ion-content[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}ion-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:5px;color:#fff;background:#ff523b;font-weight:400}ion-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 5px}ion-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:70px;height:30px;padding:5px}ion-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ff523b;font-size:14px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;cursor:pointer}ion-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}ion-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;margin-right:10px}ion-content[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}ion-content[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-top:3px solid #ff523b;width:100%;max-width:370px}ion-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}ion-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{text-align:right}"]}),n})()}];let _=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.Bz.forChild(w),d.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,m.u5,s.Pc,_]}),n})()}}]);