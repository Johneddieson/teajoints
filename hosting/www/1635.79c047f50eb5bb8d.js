"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1635],{1635:(N,d,r)=>{r.r(d),r.d(d,{CreateposPageModule:()=>A});var g=r(9808),C=r(4182),i=r(4153),p=r(1115),m=r(655),t=r(6435),y=r(8929),P=r(4850),_=r(1423),M=r(3388),v=r(5920),O=r(2316);const x=["productbtn"];function S(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",3),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.checkout())}),t.TgZ(1,"ion-badge",8),t._uU(2),t.qZA(),t._uU(3,"Checkout"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.numbers)}}function k(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-thumbnail",1),t._UZ(2,"img",9),t.qZA(),t.TgZ(3,"ion-label")(4,"h2"),t._uU(5),t.TgZ(6,"span",10),t._uU(7),t.qZA()(),t._UZ(8,"h3"),t.TgZ(9,"p",11),t._uU(10),t.qZA(),t.TgZ(11,"div",12)(12,"span",13),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.Decrease(c))}),t._uU(13," - "),t.qZA(),t._uU(14),t.TgZ(15,"span",14),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.Increase(c))}),t._uU(16," + "),t.qZA(),t.TgZ(17,"span",15)(18,"button",16),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.AddtoCart(c))}),t._uU(19," Add"),t.qZA()()()()()}if(2&n){const e=u.$implicit;t.xp6(2),t.s9C("src",e.ImageUrl,t.LSH),t.xp6(3),t.hij("",e.ProductName," "),t.xp6(2),t.hij("\u20b1 ",e.UnitPrice,""),t.xp6(3),t.hij(" ",e.Stock," remaining stock"),t.xp6(4),t.hij(" ",e.Quantity," ")}}const T=[{path:"",component:(()=>{class n{constructor(e,o,s,c,a,l,h,I,f,Q,U){this.msg=e,this.alertCtrl=o,this.auth=s,this.afstore=c,this.afauth=a,this.locationStrategy=l,this.router=h,this.applicationRef=I,this.zone=f,this.actRoute=Q,this.loadingCtrl=U,this.numbers=0,this.showLog=!1,this.productList=[],this.getCartDetails=[],this.cartItem=0,this.dropdown=!1,this.category="",this.unsubscriber=new y.xQ,this.itemsCart=[],h.events.subscribe(()=>{f.run(()=>{setTimeout(()=>{this.applicationRef.tick(),this.loadCart()},0)})}),this.afauth.authState.subscribe(b=>{b&&b.uid&&this.getAllProducts()})}getAllProducts(){this.productReference=this.category?this.afstore.collection("Products",e=>e.where("Category","==",this.category)):this.afstore.collection("Products"),this.sub=this.productReference.snapshotChanges().pipe((0,P.U)(e=>e.map(o=>Object.assign({id:o.payload.doc.id},o.payload.doc.data())))).subscribe(e=>{this.productList=e})}loadProducts(){return(0,m.__awaiter)(this,void 0,void 0,function*(){var e=yield this.loadingCtrl.create({message:"Loading...",spinner:"bubbles"});yield e.present(),setTimeout(()=>{e.dismiss()},300)})}ngOnInit(){this.router.events.subscribe(()=>{this.zone.run(()=>{setTimeout(()=>{this.applicationRef.tick(),this.loadCart()},0)})})}SearchCategory(){return(0,m.__awaiter)(this,void 0,void 0,function*(){var e=this.alertCtrl.create({header:"Choose Category",inputs:[{type:"radio",label:"--SHOW ALL--",value:""},{type:"radio",label:"Frappe",value:"Frappe"},{type:"radio",label:"Milktea",value:"Milktea"},{type:"radio",label:"Noodles",value:"Noodles"},{type:"radio",label:"Pares",value:"Pares"},{type:"radio",label:"Platters",value:"Platters"},{type:"radio",label:"Shakes",value:"Shakes"},{type:"radio",label:"Silog Meals",value:"Silog Meals"},{type:"radio",label:"Sizzling Meal W Rice",value:"Sizzling Meal W/ Rice"},{type:"radio",label:"Snacks",value:"Snacks"},{type:"radio",label:"Rice Meal",value:"Rice Meal"}],buttons:[{text:"Search",handler:o=>{this.category=o,this.loadProducts(),setTimeout(()=>{this.getAllProducts()},500)}},{text:"Close",role:"cancel"}]});(yield e).present()})}loadCart(){if(null!=sessionStorage.getItem("cart")){var e=[];e.push(JSON.parse(sessionStorage.getItem("cart"))),this.numbers=e[0].length}else this.numbers=0}Increase(e){e.Quantity+=1,this.loadCart()}Decrease(e){1==e.Quantity?this.alertCtrl.create({message:"Quantity should not be zero",buttons:[{text:"Ok",role:"cancel"}]}).then(o=>{o.present(),this.loadCart()}):(e.Quantity-=1,this.loadCart())}AddtoCart(e){if(e.Quantity>e.Stock)this.alertCtrl.create({message:"The quantity order should not be greater than the stock available",buttons:[{text:"Ok",role:"cancel"}]}).then(a=>{a.present(),e.Quantity=1});else{if(null==sessionStorage.getItem("cart")){let l=[];l.push(e),sessionStorage.setItem("cart",JSON.stringify(l)),e.Quantity=1}else{var c=e.id;let a=-1;this.itemsCart=JSON.parse(sessionStorage.getItem("cart"));for(let l=0;l<this.itemsCart.length;l++)if(c==this.itemsCart[l].id){this.itemsCart[l].Quantity=e.Quantity,e.Quantity=1,a=l;break}-1==a?(this.itemsCart.push(e),sessionStorage.setItem("cart",JSON.stringify(this.itemsCart)),e.Quantity=1):(sessionStorage.setItem("cart",JSON.stringify(this.itemsCart)),e.Quantity=1),this.cartItemFunc()}this.loadCart()}}cartItemFunc(){var e=JSON.parse(sessionStorage.getItem("cart"));this.cartItem=e.length,this.msg.cartSubject.next(this.cartItem)}checkout(){this.router.navigateByUrl("/admincheckout")}hideDropdown(e){const o=e.clientX,s=e.clientY,c=this.productbtn.nativeElement.getBoundingClientRect();(o<c.left+2||o>c.right-2||s<c.top+2)&&(this.dropdown=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.g),t.Y36(i.Br),t.Y36(M.u),t.Y36(v.ST),t.Y36(O.zQ),t.Y36(g.S$),t.Y36(p.F0),t.Y36(t.z2F),t.Y36(t.R0b),t.Y36(p.gz),t.Y36(i.HT))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-createpos"]],viewQuery:function(e,o){if(1&e&&t.Gf(x,5,t.SBq),2&e){let s;t.iGM(s=t.CRH())&&(o.productbtn=s.first)}},inputs:{title:"title"},decls:15,vars:2,consts:[["color","primary"],["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","search-outline"],[3,"click",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],["color","danger"],[3,"src"],[2,"float","right","color","#3880ff"],[1,"rate"],["id","qty"],[1,"minus",3,"click"],[1,"plus",3,"click"],[2,"float","right"],["id","btn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-buttons",2)(5,"ion-button",3),t.NdJ("click",function(){return o.SearchCategory()}),t._UZ(6,"ion-icon",4),t.qZA(),t.YNc(7,S,4,1,"ion-button",5),t.qZA()()(),t.TgZ(8,"ion-content")(9,"div",6)(10,"ion-grid")(11,"ion-row")(12,"ion-col")(13,"ion-list"),t.YNc(14,k,20,5,"ion-item",7),t.qZA()()()()()()),2&e&&(t.xp6(7),t.Q6J("ngIf",0!=o.numbers),t.xp6(7),t.Q6J("ngForOf",o.productList))},dependencies:[g.sg,g.O5,i.oU,i.yp,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.Nd,i.Bs,i.sr,i.cs],styles:["ion-back-button[_ngcontent-%COMP%]{display:block}.toolbar[_ngcontent-%COMP%]{height:84px;--background: #69A03A;color:#fff;font-size:20px;line-height:84px}.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:100px!important;height:100px!important}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.container[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#ccc}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]{margin-top:5px}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-weight:600;padding:5px;margin-right:20px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{margin-left:20px;font-weight:600;padding:5px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:active{background-color:#3880ff}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]:active{background-color:red}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#3880ff}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}.container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:10px;color:#69a03a}"]}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(T),p.Bz]}),n})(),A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,C.u5,i.Pc,Z,C.UX]}),n})()}}]);