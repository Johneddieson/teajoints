"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5633],{65633:(N,p,d)=>{d.r(p),d.d(p,{EditproductPageModule:()=>k});var h=d(69808),a=d(34182),n=d(54153),m=d(41115),f=d(15439),t=d(6435),_=d(40520),P=d(5920);function b(e,i){if(1&e&&t._UZ(0,"img",20),2&e){const r=t.oxw();t.s9C("src",r.photoLink,t.LSH)}}function v(e,i){1&e&&(t.TgZ(0,"ion-text",21),t._uU(1," Product Name shouldn't be empty "),t.qZA())}function x(e,i){if(1&e&&(t.TgZ(0,"ion-text",23),t._uU(1),t.qZA()),2&e){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.registerForm.controls.firstname.errors.invalidMsg," ")}}function w(e,i){if(1&e&&(t.TgZ(0,"div",22),t.YNc(1,x,2,1,"ion-text",11),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.registerForm.controls.firstname.errors.invalidMsg)}}function Z(e,i){1&e&&(t.TgZ(0,"ion-text",23),t._uU(1," Product Name must be minimum 5 characters long "),t.qZA())}function I(e,i){1&e&&(t.TgZ(0,"ion-text",23),t._uU(1," Stock of product shouldn't be empty "),t.qZA())}function M(e,i){if(1&e&&(t.TgZ(0,"ion-text",23),t._uU(1),t.qZA()),2&e){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.registerForm.controls.cellphonenumber.errors.invalidMsg," ")}}function F(e,i){if(1&e&&(t.TgZ(0,"div",22),t.YNc(1,M,2,1,"ion-text",11),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.registerForm.controls.cellphonenumber.errors.invalidMsg)}}function T(e,i){1&e&&(t.TgZ(0,"ion-text",23),t._uU(1," Price of product shouldn't be empty "),t.qZA())}function E(e,i){if(1&e&&(t.TgZ(0,"ion-text",23),t._uU(1),t.qZA()),2&e){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.registerForm.controls.password.errors.invalidMsg," ")}}function C(e,i){if(1&e&&(t.TgZ(0,"div",22),t.YNc(1,E,2,1,"ion-text",11),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.registerForm.controls.password.errors.invalidMsg)}}const U=[{path:"",component:(()=>{class e{constructor(r,o,l,c,s,g){this.actRoute=r,this.http=o,this.formBuilder=l,this.loadingCtrl=c,this.alertCtrl=s,this.afstore=g,this.withPhoto=!1,this.isDisabled=!1,this.isdisabled=!1,this.id=r.snapshot.paramMap.get("id"),this.productReference=this.afstore.doc(`Products/${this.id}`),this.sub=this.productReference.valueChanges().subscribe(u=>{this.productname=u.ProductName,this.stock=u.Stock.toString(),this.price=u.UnitPrice,this.photoLink=u.ImageUrl,this.withPhoto=!0,this.currentstock=u.Stock.toString()})}ngOnInit(){this.registerForm=new a.cw({firstname:new a.NI("",[a.kI.required,this.customPatternValid({pattern:/^([A-Z][a-z]*((\s[A-Za-z])?[a-z]*)*)$/,msg:"Always Starts With Capital Letter"}),this.customPatternValid({pattern:/^([^0-9]*)$/,msg:"Numbers is not allowed"}),a.kI.minLength(5)]),cellphonenumber:new a.NI("",[a.kI.required,this.customPatternValid({pattern:/^[+-]?(?:\d*[1-9]\d*(?:\.\d+)?|0+\.\d*[1-9]\d*)$/,msg:"This format is not allowed"}),this.customPatternValid({pattern:/^([^.?!-]*)$/,msg:"Negative is not allowed"}),this.customPatternValid({pattern:/^([^.?!_]*)$/,msg:"Under Score is not allowed"}),this.customPatternValid({pattern:/^([^.?!=]*)$/,msg:"Equal is not allowed"}),this.customPatternValid({pattern:/^([^.?!+]*)$/,msg:"Plus is not allowed"}),this.customPatternValid({pattern:/^([^.?!.]*)$/,msg:"Period is not allowed"})]),password:new a.NI("",[a.kI.required,this.customPatternValid({pattern:/^[+-]?(?:\d*[1-9]\d*(?:\.\d+)?|0+\.\d*[1-9]\d*)$/,msg:"This format is not allowed"}),this.customPatternValid({pattern:/^([^-]*)$/,msg:"Negative is not allowed"}),this.customPatternValid({pattern:/^([^?!_]*)$/,msg:"Under Score is not allowed"}),this.customPatternValid({pattern:/^([^?!=]*)$/,msg:"Equal is not allowed"}),this.customPatternValid({pattern:/^([^?!+]*)$/,msg:"Plus is not allowed"})])})}customPatternValid(r){return console.log("wew",r),o=>o.value&&!o.value.match(r.pattern)?{invalidMsg:r.msg}:null}reset(){console.log("wew",this.myInputVariable.value),this.myInputVariable.value=""}fileChanged(r){const o=r.target.files,l=new FormData;l.append("file",o[0]),l.append("UPLOADCARE_PUB_KEY","d215c12fb1b590263b07"),this.http.post("https://upload.uploadcare.com/base/",l).subscribe(c=>{var s={events:c};for(var g in s){console.log("wew",s[g].file);for(const u of o)this.photoLink=`https://ucarecdn.com/${s[g].file}/${u.name}`}this.withPhoto=!0})}submit(){this.loadingCtrl.create({message:"Updating Product"}).then(c=>{c.present(),setTimeout(()=>{c.dismiss(),this.alertCtrl.create({header:"Officially Updated",message:"You updated the product successfully",buttons:[{text:"Ok",role:"cancel"}]}).then(s=>{s.present()}).catch(s=>{})},3e3)}).catch(c=>{});var r=f(new Date).format("MM-DD-YYYY hh:mm A");if(parseInt(this.registerForm.value.cellphonenumber)==parseInt(this.currentstock))this.productReference.update({Stock:parseInt(this.registerForm.value.cellphonenumber),UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink});else if(parseInt(this.registerForm.value.cellphonenumber)>parseInt(this.currentstock)){var o=parseInt(this.registerForm.value.cellphonenumber)-parseInt(this.currentstock);this.productReference.update({Stock:parseInt(this.registerForm.value.cellphonenumber),UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink}),this.afstore.collection("Inventory").add({Quantity:1*o,Datetime:r,read:!1,Destination:"Admin",ProductName:this.registerForm.value.firstname,UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink,DatetimeToSort:new Date})}else{var l=parseInt(this.currentstock)-parseInt(this.registerForm.value.cellphonenumber);this.productReference.update({Stock:parseInt(this.registerForm.value.cellphonenumber),UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink}),this.afstore.collection("Inventory").add({Quantity:-1*l,Datetime:r,read:!1,Destination:"Admin",ProductName:this.registerForm.value.firstname,UnitPrice:this.registerForm.value.password,ImageUrl:this.photoLink,DatetimeToSort:new Date})}}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(m.gz),t.Y36(_.eN),t.Y36(a.qu),t.Y36(n.HT),t.Y36(n.Br),t.Y36(P.ST))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-editproduct"]],viewQuery:function(r,o){if(1&r&&t.Gf(n.pK,5),2&r){let l;t.iGM(l=t.CRH())&&(o.myInputVariable=l.first)}},decls:37,vars:14,consts:[["slot","start"],["color","light","fullscreen","",1,"padding"],["novalidate","",3,"formGroup","ngSubmit"],["class","camera",3,"src",4,"ngIf"],["type","file","accept","image/*",1,"uploadfile",3,"change"],["inputFile",""],["counter","true"],["position","floating"],["maxlength","20","formControlName","firstname",3,"ngModel","disabled","ngModelChange"],["type","text","color","danger",4,"ngIf"],["class","error",4,"ngIf"],["color","danger",4,"ngIf"],["id","custom-item","counter","true"],["maxlength","6","type","tel","formControlName","cellphonenumber",3,"ngModel","ngModelChange"],["maxlength","6","type","tel","formControlName","password",3,"ngModel","ngModelChange"],["type","submit","hidden",""],["btn",""],["vertical","bottom","horizontal","end","slot","fixed"],["color","success",3,"disabled","click"],["name","save-outline"],[1,"camera",3,"src"],["type","text","color","danger"],[1,"error"],["color","danger"]],template:function(r,o){if(1&r){const l=t.EpF();t.TgZ(0,"ion-toolbar")(1,"ion-buttons",0),t._UZ(2,"ion-back-button"),t.TgZ(3,"ion-title"),t._uU(4,"Edit Product"),t.qZA()()(),t.TgZ(5,"ion-content",1)(6,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.YNc(7,b,1,1,"img",3),t.TgZ(8,"ion-input",4,5),t.NdJ("change",function(s){return o.fileChanged(s)}),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"ion-item",6)(12,"ion-label",7),t._uU(13,"Name"),t.qZA(),t.TgZ(14,"ion-input",8),t.NdJ("ngModelChange",function(s){return o.productname=s}),t.qZA()(),t.YNc(15,v,2,0,"ion-text",9),t.YNc(16,w,2,1,"div",10),t.YNc(17,Z,2,0,"ion-text",11),t._UZ(18,"br"),t.TgZ(19,"ion-item",12)(20,"ion-label",7),t._uU(21,"Stocks"),t.qZA(),t.TgZ(22,"ion-input",13),t.NdJ("ngModelChange",function(s){return o.stock=s}),t.qZA()(),t.YNc(23,I,2,0,"ion-text",11),t.YNc(24,F,2,1,"div",10),t._UZ(25,"br"),t.TgZ(26,"ion-item",12)(27,"ion-label",7),t._uU(28,"Unit Price"),t.qZA(),t.TgZ(29,"ion-input",14),t.NdJ("ngModelChange",function(s){return o.price=s}),t.qZA()(),t.YNc(30,T,2,0,"ion-text",11),t.YNc(31,C,2,1,"div",10),t._UZ(32,"button",15,16),t.TgZ(34,"ion-fab",17)(35,"ion-fab-button",18),t.NdJ("click",function(){t.CHM(l);const s=t.MAs(33);return t.KtG(s.click())}),t._UZ(36,"ion-icon",19),t.qZA()()()()}2&r&&(t.xp6(6),t.Q6J("formGroup",o.registerForm),t.xp6(1),t.Q6J("ngIf",""!=o.photoLink),t.xp6(7),t.Q6J("ngModel",o.productname)("disabled",!o.isDisabled),t.xp6(1),t.Q6J("ngIf",o.registerForm.get("firstname").hasError("required")&&o.registerForm.get("firstname").touched),t.xp6(1),t.Q6J("ngIf",!o.registerForm.controls.firstname.valid&&(o.registerForm.controls.firstname.dirty||o.registerForm.controls.firstname.touched)),t.xp6(1),t.Q6J("ngIf",o.registerForm.get("firstname").hasError("minlength")&&o.registerForm.get("firstname").touched),t.xp6(5),t.Q6J("ngModel",o.stock),t.xp6(1),t.Q6J("ngIf",o.registerForm.get("cellphonenumber").hasError("required")&&o.registerForm.get("cellphonenumber").touched),t.xp6(1),t.Q6J("ngIf",!o.registerForm.controls.cellphonenumber.valid&&(o.registerForm.controls.cellphonenumber.dirty||o.registerForm.controls.cellphonenumber.touched)),t.xp6(5),t.Q6J("ngModel",o.price),t.xp6(1),t.Q6J("ngIf",o.registerForm.get("password").hasError("required")&&o.registerForm.get("password").touched),t.xp6(1),t.Q6J("ngIf",!o.registerForm.controls.password.valid&&(o.registerForm.controls.password.dirty||o.registerForm.controls.password.touched)),t.xp6(4),t.Q6J("disabled",o.registerForm.invalid))},dependencies:[h.O5,a._Y,a.JJ,a.JL,a.nD,n.oU,n.Sm,n.W2,n.IJ,n.W4,n.gu,n.pK,n.Ie,n.Q$,n.yW,n.wd,n.sr,n.j9,n.cs,a.sg,a.u],styles:["ion-back-button[_ngcontent-%COMP%]{display:block}.toolbar[_ngcontent-%COMP%]{height:84px;--background: #69A03A;color:#fff;font-size:20px;line-height:84px}.logo[_ngcontent-%COMP%]{margin-top:6%}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.form[_ngcontent-%COMP%]{margin-top:-20px}.form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-radius:5px;border-color:gray;border-width:2px;border-style:solid;margin-bottom:10px}ion-button[_ngcontent-%COMP%]{text-transform:none}ion-content[_ngcontent-%COMP%]{--background: url(teajointslogo.afdb6337aa49a8a1.jpg) no-repeat center center / cover;--background-size: cover}ion-content[_ngcontent-%COMP%]   .camera[_ngcontent-%COMP%]{width:200px;height:128px;margin:0 auto}"]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(U),m.Bz]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.ez,a.u5,n.Pc,a.UX,y]}),e})()}}]);