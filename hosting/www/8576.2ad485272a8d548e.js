"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8576],{8576:(v,f,a)=>{a.r(f),a.d(f,{CheckoutPageModule:()=>k});var c=a(9808),p=a(4182),i=a(4153),h=a(1115),O=a(4850),P=a(5439),t=a(6435),y=a(2316),M=a(5920),b=a(1423);function I(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-thumbnail",1),t._UZ(2,"img",7),t.qZA(),t.TgZ(3,"ion-label")(4,"h2"),t._uU(5),t.TgZ(6,"span",8),t._uU(7),t.ALo(8,"currency"),t.qZA()(),t._UZ(9,"h3"),t.TgZ(10,"p",9),t._uU(11),t.qZA(),t.TgZ(12,"div",10),t._UZ(13,"span",11),t._uU(14),t._UZ(15,"span",12),t.TgZ(16,"span",13)(17,"button",14),t.NdJ("click",function(){const u=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.singleDelete(u))}),t._uU(18," Remove"),t.qZA()()()()()}if(2&n){const e=s.$implicit;t.xp6(2),t.s9C("src",e.ImageUrl,t.LSH),t.xp6(3),t.hij("",e.ProductName," "),t.xp6(2),t.Oqu(t.xi3(8,5,e.UnitPrice,"\u20b1")),t.xp6(4),t.hij(" ",e.Stock," remaining stock"),t.xp6(3),t.hij(" ",e.Quantity," ")}}function x(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.OrderNow())}),t._uU(1,"Confirm Order"),t.qZA()}}const _=[{path:"",component:(()=>{class n{constructor(e,o,r,u,g,D){this.alertCtrl=e,this.locationStrategy=o,this.router=r,this.afauth=u,this.afstore=g,this.msg=D,this.getCartDetails=[],this.total=0,this.cartItem=0,this.getOrders=[],this.myInformation={},this.afauth.authState.subscribe(m=>{m&&m.uid&&(this.meReference=g.doc(`users/${m.uid}`),this.sub=this.meReference.valueChanges().subscribe(Z=>{this.myInformation=Z,this.afstore.collection("Orders").snapshotChanges().pipe((0,O.U)(d=>d.map(l=>Object.assign({id:l.payload.doc.id},l.payload.doc.data())))).subscribe(d=>{this.getOrders=d,console.log("orders",this.getOrders);var l=this.getOrders;l=l.map((C,N)=>(console.log("orders",C),Object.assign({},C,{})))})}))})}ngOnInit(){this.CartDetails(),this.loadCart()}CartDetails(){sessionStorage.getItem("cart")&&(this.getCartDetails=JSON.parse(sessionStorage.getItem("cart")))}inc(e,o){for(let r=0;r<this.getCartDetails.length;r++)this.getCartDetails[r].id===e&&(this.getCartDetails[r].Quantity=o+1);sessionStorage.setItem("cart",JSON.stringify(this.getCartDetails)),this.loadCart()}dec(e,o){for(let r=0;r<this.getCartDetails.length;r++)this.getCartDetails[r].id===e&&1!=o&&(this.getCartDetails[r].Quantity=o-1);sessionStorage.setItem("cart",JSON.stringify(this.getCartDetails)),this.loadCart()}loadCart(){sessionStorage.getItem("cart")&&(this.getCartDetails=JSON.parse(sessionStorage.getItem("cart")),this.total=this.getCartDetails.reduce((e,o)=>e+o.UnitPrice*o.Quantity,0))}removeall(){sessionStorage.removeItem("cart"),this.getCartDetails=[],this.total=0,this.cartItem=0,this.msg.cartSubject.next(this.cartItem),this.loadCart()}singleDelete(e){if(sessionStorage.getItem("cart")){this.getCartDetails=JSON.parse(sessionStorage.getItem("cart"));for(let o=0;o<this.getCartDetails.length;o++)this.getCartDetails[o].id===e.id&&(this.getCartDetails.splice(o,1),sessionStorage.setItem("cart",JSON.stringify(this.getCartDetails)),this.loadCart(),this.cartItemFunc())}}cartItemFunc(){var e=JSON.parse(sessionStorage.getItem("cart"));this.cartItem=e.length,this.msg.cartSubject.next(this.cartItem)}gotohome(){this.router.navigate(["tabs"])}OrderNow(){this.alertCtrl.create({message:"Are you sure you want to finalize your order?",buttons:[{text:"Ok",handler:()=>{this.alertCtrl.create({message:"Ordered Successfully!",buttons:[{text:"Ok",role:"cancel"}]}).then(e=>{if(console.log("my info",this.myInformation),this.myInformation.FirstName&&this.myInformation.LastName&&this.myInformation.Address1&&this.myInformation.Address2&&this.myInformation.PhoneNumber){e.present();var o=P(new Date).format("DD-MM-YYYY hh:mm A");this.afstore.collection("Orders").add({OrderDetails:this.getCartDetails,BillingFirstname:this.myInformation.FirstName,BillingLastname:this.myInformation.LastName,BillingAddress1:this.myInformation.Address1,BillingAddress2:this.myInformation.Address2,BillingPhonenumber:this.myInformation.PhoneNumber,Billingemail:this.myInformation.Email,BillingIndexId:this.myInformation.Uid,Status:"Open",Datetime:o,TotalAmount:parseFloat(this.total.toString()).toFixed(2),DatetimeToSort:new Date}).then(r=>{}).catch(r=>{alert(r)}),this.removeall()}else this.alertCtrl.create({message:"Please fill up about your details first.",buttons:[{text:"Ok",handler:()=>{this.router.navigateByUrl("/tabs/tab3")}}]}).then(r=>{r.present()})})}},{text:"Cancel",role:"cancel"}]}).then(e=>{e.present()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.Br),t.Y36(c.S$),t.Y36(h.F0),t.Y36(y.zQ),t.Y36(M.ST),t.Y36(b.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-checkout"]],decls:22,vars:6,consts:[["color","primary"],["slot","start"],[1,"container"],[4,"ngFor","ngForOf"],["size","7"],["size","5"],["color","light",3,"click",4,"ngIf"],[3,"src"],[2,"float","right","color","#3880ff"],[1,"rate"],["id","qty"],[1,"minus"],[1,"plus"],[2,"float","right"],["id","btn",3,"click"],["color","light",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Check Out"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",2)(8,"ion-grid")(9,"ion-row")(10,"ion-col")(11,"ion-list"),t.YNc(12,I,19,8,"ion-item",3),t.qZA()()()()()(),t.TgZ(13,"ion-footer")(14,"ion-row")(15,"ion-col",4)(16,"ion-text")(17,"h4"),t._uU(18),t.ALo(19,"currency"),t.qZA()()(),t.TgZ(20,"ion-col",5),t.YNc(21,x,2,0,"ion-button",6),t.qZA()()()),2&e&&(t.xp6(12),t.Q6J("ngForOf",o.getCartDetails),t.xp6(6),t.hij("Total : ",t.xi3(19,3,o.total,"\u20b1")," "),t.xp6(3),t.Q6J("ngIf",o.total>0))},dependencies:[c.sg,c.O5,i.oU,i.YG,i.Sm,i.wI,i.W2,i.fr,i.jY,i.Gu,i.Ie,i.Q$,i.q_,i.Nd,i.yW,i.Bs,i.wd,i.sr,i.cs,c.H9],styles:[".toolbar[_ngcontent-%COMP%]{height:84px;--background: #69A03A;color:#fff;font-size:20px;line-height:84px}.buttonsactive[_ngcontent-%COMP%]:active{background-color:red;font-weight:500}.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:100px!important;height:100px!important}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.container[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#ccc}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]{margin-top:5px}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-weight:600;padding:5px;margin-right:20px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{margin-left:20px;font-weight:600;padding:5px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:red}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}.container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:10px;color:#3880ff}ion-back-button[_ngcontent-%COMP%]{display:block}ion-footer[_ngcontent-%COMP%]{--background: #3880ff}ion-footer[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{background:#3880ff;color:#fff}ion-footer[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:last-child{text-align:end}"]}),n})()}];let S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(_),h.Bz]}),n})(),k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,p.u5,i.Pc,S]}),n})()}}]);