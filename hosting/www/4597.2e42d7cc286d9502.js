"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4597],{4597:(Z,h,r)=>{r.r(h),r.d(h,{ViewproductsPageModule:()=>k});var u=r(9808),C=r(4182),i=r(4153),d=r(1115),P=r(655),t=r(6435),f=r(4850),M=r(5439),y=r(520),b=r(5920),O=r(2316);const _=["productbtn"];function x(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"ion-item")(1,"ion-thumbnail",1),t._UZ(2,"img",7),t.qZA(),t.TgZ(3,"ion-label")(4,"h2"),t._uU(5),t.TgZ(6,"span",8),t._uU(7),t.ALo(8,"currency"),t.qZA()(),t._UZ(9,"h3"),t.TgZ(10,"p",9),t._uU(11),t.qZA(),t.TgZ(12,"div",10)(13,"span",11)(14,"button",12),t.NdJ("click",function(){const l=t.CHM(n).$implicit,s=t.oxw();return t.KtG(s.DeleteProduct(l))}),t._uU(15," Delete"),t.qZA()(),t.TgZ(16,"span",11)(17,"button",13),t.NdJ("click",function(){const l=t.CHM(n).$implicit,s=t.oxw();return t.KtG(s.EditProduct(l))}),t._uU(18," Edit"),t.qZA()()()()()}if(2&e){const n=c.$implicit;t.xp6(2),t.s9C("src",n.ImageUrl,t.LSH),t.xp6(3),t.hij("",n.ProductName," "),t.xp6(2),t.hij(" ",t.xi3(8,4,n.UnitPrice,"\u20b1"),""),t.xp6(4),t.hij(" ",n.Stock," remaining stock")}}const v=[{path:"",component:(()=>{class e{constructor(n,o,a,l,s,g,p){this.http=n,this.loadingCtrl=o,this.alertCtrl=a,this.afstore=l,this.afauth=s,this.router=g,this.actRoute=p,this.products=[],this.dropdown=!1,this.category="",this.afauth.authState.subscribe(m=>{m&&m.uid&&this.getAllProducts()})}getAllProducts(){this.productReference=this.category?this.afstore.collection("Products",n=>n.where("Category","==",this.category)):this.afstore.collection("Products"),this.sub=this.productReference.snapshotChanges().pipe((0,f.U)(n=>n.map(o=>Object.assign({id:o.payload.doc.id},o.payload.doc.data())))).subscribe(n=>{this.products=n})}loadProducts(){return(0,P.__awaiter)(this,void 0,void 0,function*(){var n=yield this.loadingCtrl.create({message:"Loading...",spinner:"bubbles"});yield n.present(),setTimeout(()=>{n.dismiss()},300)})}SearchCategory(){return(0,P.__awaiter)(this,void 0,void 0,function*(){var n=this.alertCtrl.create({header:"Choose Category",inputs:[{type:"radio",label:"--SHOW ALL--",value:""},{type:"radio",label:"Frappe",value:"Frappe"},{type:"radio",label:"Milktea",value:"Milktea"},{type:"radio",label:"Noodles",value:"Noodles"},{type:"radio",label:"Pares",value:"Pares"},{type:"radio",label:"Platters",value:"Platters"},{type:"radio",label:"Shakes",value:"Shakes"},{type:"radio",label:"Silog Meals",value:"Silog Meals"},{type:"radio",label:"Sizzling Meal W Rice",value:"Sizzling Meal W/ Rice"},{type:"radio",label:"Snacks",value:"Snacks"},{type:"radio",label:"Rice Meal",value:"Rice Meal"}],buttons:[{text:"Search",handler:o=>{this.category=o,this.loadProducts(),setTimeout(()=>{this.getAllProducts()},500)}},{text:"Close",role:"cancel"}]});(yield n).present()})}ngOnInit(){}DeleteProduct(n){this.alertCtrl.create({message:"Are you sure you want to delete this product?",buttons:[{text:"Yes",handler:()=>{var o=M(new Date).format("DD-MM-YYYY hh:mm A");this.afstore.collection("Inventory").add({Quantity:-1*parseInt(n.Stock),Datetime:o,read:!1,Destination:"Admin",ProductName:n.ProductName,UnitPrice:n.UnitPrice,ImageUrl:n.ImageUrl}),this.afstore.doc(`Products/${n.id}`).delete()}},{text:"No",role:"cancel"}]}).then(o=>{o.present()})}EditProduct(n){this.router.navigateByUrl(`/editproduct/${n.id}`)}hideDropdown(n){const o=n.clientX,a=n.clientY,l=this.productbtn.nativeElement.getBoundingClientRect();(o<l.left+2||o>l.right-2||a<l.top+2)&&(this.dropdown=!1)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(y.eN),t.Y36(i.HT),t.Y36(i.Br),t.Y36(b.ST),t.Y36(O.zQ),t.Y36(d.F0),t.Y36(d.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-viewproducts"]],viewQuery:function(n,o){if(1&n&&t.Gf(_,5,t.SBq),2&n){let a;t.iGM(a=t.CRH())&&(o.productbtn=a.first)}},inputs:{title:"title"},decls:16,vars:1,consts:[["color","primary"],["slot","start"],["slot","end"],[3,"click"],["slot","icon-only","name","search-outline"],[1,"container"],[4,"ngFor","ngForOf"],[3,"src"],[2,"float","right","color","#3880ff"],[1,"rate"],["id","qty"],[2,"float","right"],["id","btn2",3,"click"],["id","btn",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3,"Products"),t.qZA(),t.TgZ(4,"ion-buttons",1),t._UZ(5,"ion-back-button"),t.qZA(),t.TgZ(6,"ion-buttons",2)(7,"ion-button",3),t.NdJ("click",function(){return o.SearchCategory()}),t._UZ(8,"ion-icon",4),t.qZA()()()(),t.TgZ(9,"ion-content")(10,"div",5)(11,"ion-grid")(12,"ion-row")(13,"ion-col")(14,"ion-list"),t.YNc(15,x,19,7,"ion-item",6),t.qZA()()()()()()),2&n&&(t.xp6(15),t.Q6J("ngForOf",o.products))},dependencies:[u.sg,i.oU,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.Nd,i.Bs,i.wd,i.sr,i.cs,u.H9],styles:["ion-back-button[_ngcontent-%COMP%]{display:block}.toolbar[_ngcontent-%COMP%]{height:84px;--background: #69A03A;color:#fff;font-size:20px;line-height:84px}.container[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:100px!important;height:100px!important}.container[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.container[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#ccc}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]{margin-top:5px}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-weight:600;padding:5px;margin-right:20px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{margin-left:20px;font-weight:600;padding:5px;cursor:pointer}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:active{background-color:#69a03a}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]:active{background-color:red}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#3880ff}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]:active{background-color:#051542}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn2[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#c31111}.container[_ngcontent-%COMP%]   #qty[_ngcontent-%COMP%]   #btn2[_ngcontent-%COMP%]:active{background-color:#990404}.container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:10px;color:#69a03a}@media (min-width: 768px){.mobile-header[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]{display:flex;background:#92949c;padding-left:40px;padding-right:40px}}@media (max-width: 768px){.mobile-header[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]{display:none}}.active-item[_ngcontent-%COMP%]{border-bottom:2px solid var(--ion-color-dark)}.dropdown[_ngcontent-%COMP%]{width:136px;height:150px;background:#fff;position:absolute;top:40px;right:87px;z-index:1}.dropdown[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover{--ion-item-color: var(--ion-color-primary)}"]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(v),d.Bz]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,C.u5,i.Pc,w]}),e})()}}]);