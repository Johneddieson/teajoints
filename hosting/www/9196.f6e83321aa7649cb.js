"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9196],{9196:(N,h,i)=>{i.r(h),i.d(h,{Tab2PageModule:()=>O});var n=i(4153),c=i(9808),T=i(4182),b=i(581),d=i(1115),P=i(4850),t=i(6435),Z=i(5920),M=i(2316),y=i(3388);function v(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",8),t.NdJ("click",function(){t.CHM(e);const m=t.oxw().$implicit,f=t.oxw();return t.KtG(f.update(m))}),t.TgZ(1,"p"),t._uU(2,"Mark as read"),t.qZA()()}}function C(o,s){if(1&o&&(t.TgZ(0,"ion-card",5)(1,"ion-card-header")(2,"ion-card-subtitle"),t._uU(3),t.qZA(),t.TgZ(4,"ion-item")(5,"ion-label",6),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-card-content")(8,"ion-label"),t._uU(9),t.qZA()(),t.TgZ(10,"ion-row"),t.YNc(11,v,3,0,"ion-item",7),t.qZA()()),2&o){const e=s.$implicit;t.xp6(3),t.hij(" Remarks: ",e.remarks," "),t.xp6(3),t.Oqu(e.Message),t.xp6(3),t.hij("Due ",e.Datetime,""),t.xp6(2),t.Q6J("ngIf",!e.read)}}const x=[{path:"",component:(()=>{class o{constructor(e,u,m,f,S,A,D){this.router=e,this.afstore=u,this.afauth=m,this.loadingCtrl=f,this.locationStrategy=S,this.auth=A,this.alertCtrl=D,this.notificationsList=[],this.notifCounts=0,this.afauth.authState.subscribe(l=>{l&&l.uid&&(this.myid=l.uid,this.notificationsReference=this.afstore.collection(`users/${l.uid}/notifications`),this.sub=this.notificationsReference.snapshotChanges().pipe((0,P.U)(r=>r.map(g=>Object.assign({id:g.payload.doc.id},g.payload.doc.data())))).subscribe(r=>{r=(r=r.map((a,p)=>Object.assign({id:a.id,Datetime:a.Datetime,DatetimeToSort:a.DatetimeToSort,read:a.read,remarks:a.remarks,Message:a.Message}))).sort((a,p)=>Number(p.DatetimeToSort)-Number(a.DatetimeToSort)),this.notificationsList=r,console.log("wewewew",this.notificationsList);var g=r.filter(a=>1!=a.read);this.notifCounts=g.length,console.log("count",this.notifCounts)}))})}ngOnInit(){}update(e){console.log("edited",this.myid),this.afstore.doc(`users/${this.myid}/notifications/${e.id}`).update({read:!0})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.F0),t.Y36(Z.ST),t.Y36(M.zQ),t.Y36(n.HT),t.Y36(c.S$),t.Y36(y.u),t.Y36(n.Br))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tab2"]],decls:7,vars:2,consts:[["color","primary"],["slot","start"],["menu","main-menu"],[3,"fullscreen"],["class","ion-margin",4,"ngFor","ngForOf"],[1,"ion-margin"],["text-wrap",""],["button","",3,"click",4,"ngIf"],["button","",3,"click"]],template:function(e,u){1&e&&(t.TgZ(0,"ion-toolbar",0)(1,"ion-buttons",1),t._UZ(2,"ion-menu-button",2),t.TgZ(3,"ion-title"),t._uU(4,"Notifications"),t.qZA()()(),t.TgZ(5,"ion-content",3),t.YNc(6,C,12,4,"ion-card",4),t.qZA()),2&e&&(t.xp6(5),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngForOf",u.notificationsList))},dependencies:[n.Sm,n.PM,n.FN,n.Zi,n.tO,n.W2,n.Ie,n.Q$,n.fG,n.Nd,n.wd,n.sr,c.sg,c.O5],styles:["ion-content[_ngcontent-%COMP%]{--background: #F0F4FD}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300}"]}),o})()}];let F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(x),d.Bz]}),o})(),O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[n.Pc,c.ez,T.u5,b.e,F]}),o})()}}]);