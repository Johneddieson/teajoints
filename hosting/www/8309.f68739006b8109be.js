"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8309],{8309:(T,f,l)=>{l.r(f),l.d(f,{Admintab2PageModule:()=>S});var h=l(9808),A=l(4182),o=l(4153),m=l(1115),p=l(4850),e=l(6435),B=l(5920),P=l(2316);function C(t,d){if(1&t&&(e.TgZ(0,"ion-card",6)(1,"ion-card-header")(2,"ion-card-subtitle"),e._uU(3),e.qZA(),e.TgZ(4,"ion-card-title"),e._uU(5),e.qZA()(),e.TgZ(6,"ion-card-content"),e._uU(7),e._UZ(8,"br"),e._uU(9),e.qZA()()),2&t){const i=d.$implicit;e.MGl("routerLink","/orderdetails/",i.id,"/history"),e.xp6(3),e.Oqu(i.Billingemail),e.xp6(2),e.AsE("",i.BillingFirstname," ",i.BillingLastname,""),e.xp6(2),e.hij(" ",i.Datetime," "),e.xp6(2),e.hij(" ",i.Status," ")}}const y=[{path:"",component:(()=>{class t{constructor(i,c,g,r,n){this.afstore=i,this.afauth=c,this.router=g,this.currencyPipe=r,this.alertCtrl=n,this.allPendingOrders=[],this.afauth.authState.subscribe(u=>{u&&u.uid&&(this.productReference=this.afstore.collection("History"),this.sub=this.productReference.snapshotChanges().pipe((0,p.U)(s=>s.map(a=>Object.assign({historyid:a.payload.doc.id},a.payload.doc.data())))).subscribe(s=>{console.log("all orders",s),s=(s=s.map((a,b)=>Object.assign({BillingAddress1:a.BillingAddress1,BillingAddress2:a.BillingAddress2,BillingFirstname:a.BillingFirstname,BillingIndexId:a.BillingIndexId,BillingLastname:a.BillingLastname,BillingPhonenumber:a.BillingPhonenumber,Billingemail:a.Billingemail,Datetime:a.Datetime,Status:"Closed"==a.Status?"Approved":"Cancelled",TotalAmount:a.TotalAmount,id:a.historyid,DatetimeToSort:a.DatetimeToSort,OrderDetails:a.OrderDetails}))).sort((a,b)=>Number(b.DatetimeToSort)-Number(a.DatetimeToSort)),console.log("the data",s),this.allPendingOrders=s}))})}ngOnInit(){}handleChange(i){const c=i.target.value.toLowerCase();this.onchangeQueryEvent=c,this.afauth.authState.subscribe(g=>{g&&g.uid&&(this.productReference=this.afstore.collection("History"),this.sub=this.productReference.snapshotChanges().pipe((0,p.U)(r=>r.map(n=>Object.assign({historyid:n.payload.doc.id},n.payload.doc.data())))).subscribe(r=>{r=(r=r.map((n,u)=>Object.assign({BillingAddress1:n.BillingAddress1,BillingAddress2:n.BillingAddress2,BillingFirstname:n.BillingFirstname,BillingIndexId:n.BillingIndexId,BillingLastname:n.BillingLastname,BillingPhonenumber:n.BillingPhonenumber,Billingemail:n.Billingemail,Datetime:n.Datetime,Status:"Closed"==n.Status?"Approved":"Cancelled",TotalAmount:n.TotalAmount,id:n.historyid,DatetimeToSort:n.DatetimeToSort,OrderDetails:n.OrderDetails,BillingFullName:`${n.BillingFirstname} ${n.BillingLastname}`}))).sort((n,u)=>Number(u.DatetimeToSort)-Number(n.DatetimeToSort)),r=null==this.onchangeQueryEvent||""==this.onchangeQueryEvent?r:r.filter(n=>n.BillingFullName.toLowerCase().includes(this.onchangeQueryEvent)||n.Billingemail.toLowerCase().includes(this.onchangeQueryEvent)||n.Status.toLowerCase().includes(this.onchangeQueryEvent)),this.allPendingOrders=r}))})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(B.ST),e.Y36(P.zQ),e.Y36(m.F0),e.Y36(h.H9),e.Y36(o.Br))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admintab2"]],decls:11,vars:2,consts:[["slot","start"],["menu","main-menu"],["show-clear-button","always","clear-icon","trash-bin","placeholder","Fullname, Email & Status",3,"debounce","ionChange"],["fixed",""],["size","12"],["tappable","","color","dark",3,"routerLink",4,"ngFor","ngForOf"],["tappable","","color","dark",3,"routerLink"]],template:function(i,c){1&i&&(e.TgZ(0,"ion-toolbar")(1,"ion-buttons",0),e._UZ(2,"ion-menu-button",1),e.TgZ(3,"ion-title"),e._uU(4,"History Orders"),e.qZA()(),e.TgZ(5,"ion-searchbar",2),e.NdJ("ionChange",function(r){return c.handleChange(r)}),e.qZA()(),e.TgZ(6,"ion-content")(7,"ion-grid",3)(8,"ion-row")(9,"ion-col",4),e.YNc(10,C,10,6,"ion-card",5),e.qZA()()()()),2&i&&(e.xp6(5),e.Q6J("debounce",1e3),e.xp6(5),e.Q6J("ngForOf",c.allPendingOrders))},dependencies:[h.sg,o.Sm,o.PM,o.FN,o.Zi,o.tO,o.Dq,o.wI,o.W2,o.jY,o.fG,o.Nd,o.VI,o.wd,o.sr,o.j9,o.YI,m.rH],styles:[".toolbar[_ngcontent-%COMP%]{height:84px;--background: #69A03A;color:#fff;font-size:20px;line-height:84px}.addproduct[_ngcontent-%COMP%]{cursor:pointer}.addproduct[_ngcontent-%COMP%]:active{color:red}.labeldate[_ngcontent-%COMP%]{font-family:Verdana,Geneva,Tahoma,sans-serif;font-weight:900}.labelname[_ngcontent-%COMP%]{font-family:Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;font-weight:900;font-size:18px;color:#2f0101}.totalamount[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-weight:bolder}ion-accordion.accordion-expanded[_ngcontent-%COMP%]   ion-item[slot=header][_ngcontent-%COMP%]{--background: #69A03A;--color: #fff}ion-content[_ngcontent-%COMP%]{--background: url(teajointslogo.afdb6337aa49a8a1.jpg) no-repeat center center / cover}ion-card-subtitle[_ngcontent-%COMP%]{font-weight:bolder;color:#000}ion-card-title[_ngcontent-%COMP%]{font-weight:bolder;color:#000}ion-card-content[_ngcontent-%COMP%]{font-weight:bolder;color:#fff}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(y),m.Bz]}),t})(),S=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.ez,A.u5,o.Pc,O]}),t})()}}]);